# /nexus-infra/nginx/nginx.conf  nginx 설정 파일
user nginx;                 # Nginx 워커 프로세스 사용자 권한
worker_processes auto;      # CPU 코어수별 자동으로 워커 프로세스 설정

error_log /var/log/nginx/error.log warn;    # 에러 로그 파일 위치 및 로그 레벨
pid       /var/run/nginx.pid;               # Nginx PID 파일 위치

events {
    worker_connections 1024;                # 각 워커가 동시에 처리 가능한 최대 connection 수
}

http {
    # 기본 MIME 타입 및 파일 처리 설정
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    

    # 로그 설정
    access_log /var/log/nginx/access.log;
    error_log  /var/log/nginx/error.log;
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    sendfile        on;
    keepalive_timeout 65;

    # 업로드 제한 (필요 시 수정)
    client_max_body_size 10M;

    # conf.d 폴더의 설정을 불러와서 라우팅을 처리함
    include /etc/nginx/conf.d/*.conf;
}

